<div class="container-fluid">
  <div class="row">
    <div class="col-xs-12 col-lg-8 col-lg-offset-2 main item-z2">
      <div class="row">
        <div class="col-xs-12">
          <h2 class="page-header">Solicitud de Servicios / Cotización</h2>
        </div>
      </div>
      <form class="form" role="form" name="serviceRequestForm"
        data-ng-submit="submitServiceRequestForm()"
        novalidate>
        <div class="row">
          <div class="col-xs-12">
            <h4>Datos de Referencia</h4>
            <div class="well well-sm">
              <ul class="list-unstyled">
                <li>
                  Folio: {{labServiceRequest.folio_solicitud}}/{{labServiceRequest.ejercicio}}
                </li>
                <li>
                  Fecha Solicitud: {{labServiceRequest.fecha_solicitud}}
                </li>
                <li data-ng-show="labServiceRequest.fecha_captura.length > 0">
                  Fecha captura: {{labServiceRequest.fecha_captura}}
                </li>
                <li data-ng-show="labServiceRequest.fecha_valida.length > 0">
                  Fecha validación gerente: {{labServiceRequest.fecha_valida}}
                </li>
                <li data-ng-show="labServiceRequest.fecha_acepta.length > 0">
                  Fecha aceptación cliente: {{labServiceRequest.fecha_acepta}}
                </li>
                <li data-ng-show="labServiceRequest.fecha_actualizacion.length > 0">
                  Fecha actualización: {{labServiceRequest.fecha_actualizacion}}
                </li>
              </ul>
              <span class="text-info"
                data-ng-show="labServiceRequest.validado > 0">Validada</span>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <h4>Cliente</h4>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12 col-md-6 col-lg-5">
            <label for="selectClient">Seleccione un Cliente</label>
            <select class="form-control" id="selectClient"
              required
              data-ng-model="labServiceRequest.id_cliente">
              <option data-ng-repeat="client in clients"
                value="{{client.id_cliente}}">
                {{client.cliente}}{{client.area.length > 0 && ' - ' + client.area || '' }}
              </option>
            </select>
            <br>
            <div class="well well-sm item-z2 details-tooltip"
              data-ng-show="clientDetailsIsShown"
              data-ng-click="toggleClientInfo($event)">
              <div class="pull-right">
                <button type="button" class="close">
                  <span aria-hidden="true">&times;</span>
                  <span class="sr-only">Close</span>
                </button>
              </div>
              <h4>{{selectClient(labServiceRequest.id_cliente).cliente}}<br>
                <small>{{currentClient.area}}</small>
              </h4>
              <ul class="list-unstyled">
                <li>Domicilio <strong>{{currentClient.calle}}
                  {{currentClient.numero}}<br>
                  {{currentClient.colonia}}</strong></li>
                <li>Contacto <strong>{{currentClient.contacto}}</strong></li>
                <li>Tel. <strong>{{currentClient.tel}}</strong></li>
                <li>Email <strong>{{currentClient.email}}</strong></li>
                <li>Tarifa <strong>{{100 * currentClient.tasa}}%</strong></li>
              </ul>
            </div>
            <button class="btn btn-default"
              data-ng-click="toggleClientInfo($event)">
              Datos Cliente
            </button>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <h5>Norma</h5>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12 col-md-6 col-lg-5">
            <label for="selectNorm">Análisis de parámetros según Norma</label>
            <select class="form-control" id="selectNorm"
              data-ng-model="labServiceRequest.id_norma">
              <option data-ng-repeat="norm in norms"
                value="{{norm.id_norma}}">
                {{norm.norma}}
              </option>
            </select>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <h5>Parámetros seleccionados</h5>
            <h4>
              <span class="text-muted">Costo Total:</span>
              {{totalParameter() | currency}}
              {{selectNorm(labServiceRequest.id_norma)}}
            </h4>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12">
            <table class="table table-condensed">
              <tr data-ng-repeat="parameter in parameters">
                <td>
                  <label>
                      <input type="checkbox" data-ng-model="parameter.selected"
                        value="1" name="{{parameter.parametro}}" />
                      {{parameter.parametro}}
                  </label>
                </td>
                <td>
                  {{parameter.metodoEnsayo}}
                </td>
                <td>
                  <span class="text-muted">{{parameter.precio | currency}}</span>
                </td>
              </tr>
            </table>
          </div>
        </div>
        <!--
        <div class="row">
          <div class="col-xs-6 col-sm-4 col-md-3" data-ng-repeat="activity in labServiceRequest.actividades_adicionales">
            <label>
              <input type="checkbox" value="activityId{{activity.id_actividad}}"> {{activity.actividad}}
            </label>
          </div>
        </div>
        -->
        <div class="row">
          <div class="col-xs-12">
            <h5>Tipo de muestreo</h5>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-6">
            <div class="radio" data-ng-repeat="samplingType in samplingTypes">
              <label>
                <input type="radio" name="samplingTypesRadios"
                  id="samplingTypeId{{samplingType.id_tipo_muestreo}}"
                  value="{{samplingType.id_tipo_muestreo}}"
                  required>
                  {{samplingType.tipo_muestreo}}
              </label>
            </div>
          </div>
        </div>
        <br>
        <button type="submit" class="btn btn-primary"
          value="Guardar" title="Guardar"
          data-ng-disabled="!serviceRequestForm.$valid">Guardar</button>
      </form>
      <footer class="common-footer">
        <br>
        <strong>Centro de Estudios Limnológicos</strong><br>
        <ul class="list-inline">
          <li>Av. Solidaridad Iberoamericana Km 11</li>
          <li>Col. Las Pintas</li>
          <li>El Salto</li>
          <li>Jalisco</li>
          <li>CP 45690</li>
          <li>Tel. (33) 3689-1542</li>
          <li>Fax (33) 3689-4658</li>
        </ul>
        <small class=" text-muted">2014 &ndash; <strong>Comisión Estatal del Agua de Jalisco</strong></small>
      </footer>
    </div>
  </div><!-- row -->
</div>